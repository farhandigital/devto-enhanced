# DEV.to Enhanced v0.3.0 - Complete Changelog

> **Note**: This changelog was generated by Claude AI based on git commit history and pull request analysis.

**Release Date**: January 1, 2026  
**Previous Version**: [v0.2.0](https://github.com/farhandigital/devto-enhanced/releases/tag/v0.2.0)

---

## Overview

Version 0.3.0 represents a significant internal milestone focused on code quality, performance optimization, and architectural improvements. While there are no new user-facing features, this release delivers substantial performance improvements, critical bug fixes, and establishes a solid foundation for future development.

---

## üöÄ Performance Improvements

### Popup Opening Performance (#40, #41)

**Problem**: The extension popup exhibited a ~300ms delay on first open per tab session. After the initial open, subsequent opens were instantaneous, but opening a new dev.to tab would repeat this delay pattern.

**Root Cause**: The investigation revealed two separate but related performance bottlenecks:

1. **Bundle Size Issue**: The popup was importing the full feature registry, causing the popup bundle to include all DOM manipulation logic, event handlers, and complex feature implementation code that was only needed in content scripts.

2. **Timing Issue**: Module-level code execution caused initialization delays. When the module was first imported, all feature registrations and data processing occurred synchronously, blocking the popup from opening.

**Solution**: 
- **PR #40** - Separated feature metadata from implementations in the popup and implemented lazy metadata loading to eliminate the cold-start delay
- **PR #41** - Fixed a regression introduced by creating a "Single Source of Truth" that inadvertently created bundler graph coupling between the lightweight popup context and heavy content script context. The solution was to decouple popup metadata from shared definitions, accepting intentional metadata duplication to maintain performance.

**Impact**: Popup now opens instantaneously on every open, regardless of tab context.

**Commits**:
- `60c83d2` - perf(popup): separate feature metadata from implementations in popup
- `fc78f75` - perf(popup): eliminate popup cold-start delay with lazy metadata loading
- `541e325` - refactor: improve type precision and add minimal error handling
- `aa8025c` - refactor: create single source of truth for feature metadata (introduced regression)
- `0df7b29` - perf(popup): decouple metadata from shared definitions to fix regression

---

## üêõ Bug Fixes

### Table of Contents Auto-Scroll Snap-Back (#46)

**Problem**: The Table of Contents auto-scroll feature had unwanted snap-back behavior when users scrolled near the top of the page. When the "hide right sidebar" option was disabled (meaning other elements appeared above the ToC), scrolling up past the ToC would snap the browser viewport back to the first ToC item, making the page feel "sticky."

**Root Cause**: The `scrollIntoView()` method scrolls the entire browser viewport to bring an element into view. When there are elements above the ToC in the sidebar, this causes the whole page to jump.

**Solution Considered**:
1. **Scroll only the ToC container** - Replace scrollIntoView with manual scrolling. Too complex with edge cases.
2. **Skip auto-scroll for first item** - Simple but had fast-scrolling edge case where highlighter would lag.
3. **Add viewport visibility check** ‚úÖ **Selected** - Combined approach 2 with additional check to skip auto-scroll if the first heading is visible in viewport.

**Implementation**: Added two conditions to skip auto-scroll:
- `isFirstItem`: Don't auto-scroll when the active heading is the first one (normal case)
- `firstHeadingVisible`: Don't auto-scroll when the first heading is visible in viewport (fast scrolling edge case with -100px margin for anticipation)

**Impact**: ToC auto-scroll now works smoothly without interfering with page navigation near the top.

**Commits**:
- `1e245a3` - fix(toc): prevent auto-scroll snap-back for first ToC item
- `78cf4e1` - fix(toc): add viewport check to prevent snap-back during fast scrolling
- `90941af` - docs(comments): clarify -100 margin for fast scrolling in TOC generator

### Reaction Drawer Positioning (#47)

**Problem**: The reaction drawer (tooltip showing reaction options like 'Love', 'Unicorn', etc.) was appearing in the wrong location (over the article image) when the "Move Engagement Buttons" feature was enabled.

**Root Cause**: The "Move Engagement" feature moves action buttons into a new container in the DOM, stripping them of their original positioning context:
1. The original container provided a positioning context that the absolute-positioned drawer relied on
2. The new container (`.dt-engagement-moved`) and moved elements lacked `position: relative` styles
3. The drawer's `position: absolute` resolved relative to the viewport or distant ancestor

**Solution**: Introduced specific CSS overrides in `devto.css` targeting engagement buttons only when in the "moved" state:
- Applies `position: relative !important` to `.reaction-drawer__outer` to create a new local coordinate system
- Forces `position: absolute !important` on `.reaction-drawer` with precise `top`, `left`, and `transform` values

**Impact**: Reaction drawer now renders correctly directly below the "Like" button, regardless of the engagement buttons position.

**Commits**:
- `d2d662c` - fix(ui): correct reaction drawer positioning when engagement buttons are moved

---

## üèóÔ∏è Architecture & Refactoring

### Codebase Structure Reorganization (#32)

**Motivation**: Previously, everything was crammed into `utils/` (including types and features) under the mistaken belief that only WXT's opinionated folders were importable. After discovering that any folder under `src/` can be used with manual imports via the `@/` alias, a comprehensive refactoring was performed.

**New Folder Structure**:
```
src/
‚îú‚îÄ‚îÄ types/                     # All type definitions
‚îÇ   ‚îú‚îÄ‚îÄ settings.ts
‚îÇ   ‚îú‚îÄ‚îÄ feature.ts
‚îÇ   ‚îî‚îÄ‚îÄ hideable.ts
‚îú‚îÄ‚îÄ config/                    # Configuration data (constants)
‚îÇ   ‚îú‚îÄ‚îÄ selectors.ts
‚îÇ   ‚îî‚îÄ‚îÄ hideableElements.ts
‚îú‚îÄ‚îÄ features/                  # Feature implementations
‚îÇ   ‚îú‚îÄ‚îÄ registry.ts
‚îÇ   ‚îú‚îÄ‚îÄ [feature files]
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îî‚îÄ‚îÄ utils/                     # Generic utilities only
    ‚îú‚îÄ‚îÄ pageDetector.ts
    ‚îî‚îÄ‚îÄ storage.ts
```

**Benefits**:
- Clearer separation of concerns
- Easier to locate specific functionality
- Better scalability for future features
- Follows clean architecture principles

**Commits**:
- `83fade1` - refactor: reorganize folder structure for clean architecture
- `843a72c` - refactor: move selectors.ts to config folder
- `80481b0` - refactor: add barrel exports for utils folder
- `5b4ebdb` - refactor: remove barrel exports and use direct imports
- `0450e90` - refactor: update import path for registerFeature to use relative path

### Import Strategy Evolution

The project experimented with different import strategies:
1. Initially added barrel exports (`index.ts`) for cleaner imports
2. Removed barrel exports in favor of direct imports for better tree-shaking and explicit dependencies
3. Adopted a hybrid approach where appropriate based on context

---

## üîß Developer Experience

### Auto-Formatting Setup (#38, #39)

**Implementation**:
- Added Biome as the code formatter and linter
- Configured Lefthook for pre-commit hooks
- Set up automatic code formatting on commit to maintain consistent code quality

**Impact**: Ensures consistent code style across the entire codebase and prevents style-related merge conflicts.

**Commits**:
- `10bd0de` - chore: add biome dependency
- `0d7d30f` - chore: add default biome config
- `5f511d7` - chore: add lefthook dependency
- `21beb20` - chore: setup lefthook pre-commit
- `65e10f6` - style: format entire codebase with biome

### Documentation Restructuring (#45)

**Problem**: The README was bloated with too much information that not everyone wanted to read.

**Solution**: Split several sections into dedicated files while keeping only the main points in the README:
- Added contribution guide with submission and issue-reporting guidance
- Added architecture overview describing system design and performance considerations
- Introduced development guide with step-by-step feature onboarding
- Expanded features documentation with categorized descriptions

**Impact**: Improved navigation and easier access to relevant information for different audiences (users vs. developers vs. contributors).

**Commits**:
- `097510a` - chore: update README to match latest state of codebase
- `25e9aa6` - docs: restructure documentation into dedicated files and refactor README
- `3e48c0e` - docs: reorder and rephrase feature description for clarity
- `af66a82` - docs: update readme to reflect metadata/implementation split
- `70cc3ac` - docs: update README to reflect metadata duplication requirement

---

## üóëÔ∏è Removed Features

### Smooth Scroll Feature Removal (#42)

**Decision**: The smooth scroll feature was completely removed from the codebase after careful consideration.

**Reasoning**: 
- Could not reliably prevent smooth scroll on navigation without creating an overly complex mechanism
- The complexity did not justify the value of such a minor feature
- Preferred to remove entirely rather than leave dead code
- Feature can be re-added in the future when a proper solution is found

**Note**: This feature was previously extracted as a separate, independently toggleable feature in #36 before being removed.

**Related PRs**:
- **PR #36** - Initially extracted smooth scroll as a standalone feature
- **PR #42** - Complete removal of the feature

**Commits**:
- `12f3607` - feat: extract smooth scroll as separate feature
- `2ccbdc1` - feat: make smooth scroll independently toggleable
- `43967d5` - fix: enforce smooth scroll only on article pages
- `173ca53` - fix: ensure smooth scroll class cleanup on page navigation
- `9db3c68` - feat: remove smooth scroll feature

---

## üé® Code Quality

### Style Improvements

**Commits**:
- `816ff4f` - style: standardize string literals from single to double quotes in App.svelte

### Minor Fixes

**Commits**:
- `e1214b3` - chore: fix small typo

---

## üìä Statistics

**Total Commits**: 43 commits from v0.2.0 to v0.3.0  
**Pull Requests Merged**: 10 PRs  
**Files Changed**: Comprehensive refactoring across multiple modules  
**Performance Gains**: ~300ms reduction in popup opening time  

---

## üîÑ Migration Guide

No breaking changes for users. All settings and preferences are preserved. Simply update to v0.3.0 to enjoy the performance improvements and bug fixes.

---

## üìù Pull Requests

### Merged PRs

1. **#32** - refactor: reorganize codebase structure for clean architecture
2. **#36** - feat: separate smooth scroll as independently toggleable feature
3. **#38** - Setup auto formatting with Biome and Lefthook
4. **#39** - format entire codebase with biome
5. **#40** - perf: Optimize popup performance with metadata extraction and lazy loading
6. **#41** - fix(perf): decouple popup metadata to eliminate cold-start regression
7. **#42** - remove smooth scroll feature
8. **#45** - docs: restructure documentation into dedicated files and refactor README
9. **#46** - fix(toc): prevent auto-scroll snap-back when scrolling near top
10. **#47** - fix reaction drawer positioning when engagement buttons are moved

---

**Full Changelog**: https://github.com/farhandigital/devto-enhanced/compare/v0.2.0...v0.3.0
